{"ast":null,"code":"import _slicedToArray from \"/Users/rafelolmos/Documents/HookTheBook/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/rafelolmos/Documents/HookTheBook/src/components/Preview/Preview.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport uploadFile from '../../services/storage';\nimport { getItem, getAllRealTime, deleteItem, addItem } from '../../services/database'; // getAllRealTime({\n//     collection: 'books',\n//     filters: { field: 'user', condition: '==', value: user },\n//     order: 'timestamp',\n//     callback: (collectionData) => {\n//       const results = [];\n//       collectionData.forEach((document) => {\n//         const data = document.data();\n//         const addedBookDate = new Date(data.timestamp);\n//         data.date = addedBookDate.toLocaleDateString();\n//         data.time = addedBookDate.toLocaleTimeString();\n//         results.push(data);\n//       });\n//       setBookList(results);\n//     }\n//   });\n// const [book, setBook] = useState('');\n\nconst Preview = ({\n  title = '',\n  authors = '',\n  pages = 0,\n  published = '',\n  description = '',\n  image = ''\n}) => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        bookList = _useState2[0],\n        setBookList = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        book = _useState4[0],\n        setBook = _useState4[1];\n\n  const handleAddBook = async () => {\n    if (!book) return; // setBookItem = {\n    //     user: {userId}, \n    //     title: {title},\n    //     author:{authors},\n    //     timestamp: +(new Date())\n    // }\n\n    const result = await addItem('books', {\n      user,\n      title,\n      authors,\n      timestamp: +new Date()\n    });\n\n    if (result) {\n      setBook('');\n    }\n  };\n\n  const user = useSelector(state => state.user);\n  console.log('user: ', user);\n  return React.createElement(\"div\", {\n    className: \"preview\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: \"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcRXJsjaC65LLa3LRcK2t2Z08keV4viwBS1Jff3Ryo98Y9ywwAku\",\n    alt: \"\",\n    width: \"80px\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"Title: \", title), React.createElement(\"p\", {\n    className: \"author\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"Author: \", authors), React.createElement(\"button\", {\n    className: \"addBook\",\n    onClick: handleAddBook,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"AddBook\"));\n};\n\nexport default Preview;","map":{"version":3,"sources":["/Users/rafelolmos/Documents/HookTheBook/src/components/Preview/Preview.js"],"names":["React","useState","useEffect","useSelector","uploadFile","getItem","getAllRealTime","deleteItem","addItem","Preview","title","authors","pages","published","description","image","bookList","setBookList","book","setBook","handleAddBook","result","user","timestamp","Date","state","console","log"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,WAAT,QAA4B,aAA5B;AAEA,OAAOC,UAAP,MAAuB,wBAAvB;AACA,SAASC,OAAT,EAAkBC,cAAlB,EAAkCC,UAAlC,EAA8CC,OAA9C,QAA6D,yBAA7D,C,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;;AAMA,MAAMC,OAAO,GAAG,CAAC;AAACC,EAAAA,KAAK,GAAG,EAAT;AAAaC,EAAAA,OAAO,GAAG,EAAvB;AAA2BC,EAAAA,KAAK,GAAG,CAAnC;AAAsCC,EAAAA,SAAS,GAAG,EAAlD;AAAsDC,EAAAA,WAAW,GAAG,EAApE;AAAwEC,EAAAA,KAAK,GAAG;AAAhF,CAAD,KAA0F;AAAA,oBACtEd,QAAQ,CAAC,EAAD,CAD8D;AAAA;AAAA,QAC/Fe,QAD+F;AAAA,QACrFC,WADqF;;AAAA,qBAE9EhB,QAAQ,CAAC,EAAD,CAFsE;AAAA;AAAA,QAE/FiB,IAF+F;AAAA,QAEzFC,OAFyF;;AAItG,QAAMC,aAAa,GAAG,YAAY;AAC9B,QAAI,CAACF,IAAL,EAAW,OADmB,CAG9B;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAMG,MAAM,GAAG,MAAMb,OAAO,CAC5B,OAD4B,EAE5B;AACIc,MAAAA,IADJ;AAEIZ,MAAAA,KAFJ;AAGIC,MAAAA,OAHJ;AAIIY,MAAAA,SAAS,EAAE,CAAE,IAAIC,IAAJ;AAJjB,KAF4B,CAA5B;;AAQA,QAAIH,MAAJ,EAAY;AACZF,MAAAA,OAAO,CAAC,EAAD,CAAP;AACC;AACJ,GArBD;;AAuBA,QAAMG,IAAI,GAAGnB,WAAW,CAAEsB,KAAD,IAASA,KAAK,CAACH,IAAhB,CAAxB;AACAI,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBL,IAAtB;AAEA,SACI;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,GAAG,EAAC,4GAAT;AAAsH,IAAA,GAAG,EAAC,EAA1H;AAA6H,IAAA,KAAK,EAAC,MAAnI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAG,IAAA,SAAS,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAA6BZ,KAA7B,CAFJ,EAGI;AAAG,IAAA,SAAS,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAA+BC,OAA/B,CAHJ,EAII;AAAQ,IAAA,SAAS,EAAC,SAAlB;AAA4B,IAAA,OAAO,EAAES,aAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAJJ,CADJ;AASH,CAvCD;;AAyCA,eAAeX,OAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux'\n\nimport uploadFile from '../../services/storage';\nimport { getItem, getAllRealTime, deleteItem, addItem } from '../../services/database';\n\n\n\n// getAllRealTime({\n//     collection: 'books',\n//     filters: { field: 'user', condition: '==', value: user },\n//     order: 'timestamp',\n//     callback: (collectionData) => {\n//       const results = [];\n//       collectionData.forEach((document) => {\n//         const data = document.data();\n//         const addedBookDate = new Date(data.timestamp);\n//         data.date = addedBookDate.toLocaleDateString();\n//         data.time = addedBookDate.toLocaleTimeString();\n//         results.push(data);\n//       });\n//       setBookList(results);\n//     }\n//   });\n\n\n// const [book, setBook] = useState('');\n\n\n\n\n\nconst Preview = ({title = '', authors = '', pages = 0, published = '', description = '', image = '' }) => {\n    const [bookList, setBookList] = useState([]);\n    const [book, setBook] = useState([]);\n\n    const handleAddBook = async () => {\n        if (!book) return;\n\n        // setBookItem = {\n        //     user: {userId}, \n        //     title: {title},\n        //     author:{authors},\n        //     timestamp: +(new Date())\n        // }\n\n        const result = await addItem(\n        'books', \n        {   \n            user, \n            title,\n            authors,\n            timestamp: +(new Date()) }\n        );\n        if (result) {\n        setBook('')\n        }\n    };\n\n    const user = useSelector((state)=>state.user)\n    console.log('user: ', user);\n\n    return ( \n        <div className='preview'>\n            <img src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcRXJsjaC65LLa3LRcK2t2Z08keV4viwBS1Jff3Ryo98Y9ywwAku\" alt=\"\" width=\"80px\" />\n            <p className=\"title\">Title: {title}</p>\n            <p className=\"author\">Author: {authors}</p>\n            <button className=\"addBook\" onClick={handleAddBook}>AddBook</button>\n        </div>\n\n     );\n}\n \nexport default Preview;"]},"metadata":{},"sourceType":"module"}