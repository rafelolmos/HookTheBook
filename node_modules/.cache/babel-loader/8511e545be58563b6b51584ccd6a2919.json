{"ast":null,"code":"import _defineProperty from \"/Users/rafelolmos/Documents/HookTheBook/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/rafelolmos/Documents/HookTheBook/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/rafelolmos/Documents/HookTheBook/src/pages/MyFriendsBooks/MyFriendsBooks.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport { getAllRealTime } from '../../services/database';\nimport { useSelector } from 'react-redux';\nimport './MyBooksFriends.scss';\nimport Layout from '../../Layout';\nimport CardBook from '../../components/CardBook/CardBook';\n\nconst MyFriendsBooks = () => {\n  const user = useSelector(state => state.user);\n  console.log('user: ', user);\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        bookList = _useState2[0],\n        setBookList = _useState2[1];\n\n  console.log('bookList: ', bookList);\n  useEffect(() => {\n    if (user === null) return;\n    getAllRealTime({\n      collection: 'books',\n      callback: collectionData => {\n        const results = []; // const list = results.filter(function(elem){\n        //     return elem.user !== user.id;\n        // })\n\n        collectionData.forEach(document => {\n          const data = _objectSpread({\n            id: document.id\n          }, document.data());\n\n          console.log('data: ', data);\n          const list = data.filter(function (elem) {\n            return elem.user !== user.id;\n          });\n          const addedBookDate = new Date(list.timestamp);\n          list.date = addedBookDate.toLocaleDateString();\n          list.time = addedBookDate.toLocaleTimeString();\n          results.push(list);\n        });\n        setBookList(results);\n      }\n    });\n  }, [user]);\n  return React.createElement(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"cardBook-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, bookList.map((book, i) => React.createElement(CardBook, {\n    key: book.id,\n    book: book,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }))));\n};\n\nexport default MyFriendsBooks; //   useEffect(() => {\n//     if (user === null) return;\n//     getAllRealTime({collection: 'books', }).then(result=>{\n//         const list = result.filter(function(elem){\n//             return elem.user !== user.id;\n//         })\n//         setBookList(list)\n//     })\n//   }, [user])","map":{"version":3,"sources":["/Users/rafelolmos/Documents/HookTheBook/src/pages/MyFriendsBooks/MyFriendsBooks.js"],"names":["React","useState","useEffect","getAllRealTime","useSelector","Layout","CardBook","MyFriendsBooks","user","state","console","log","bookList","setBookList","collection","callback","collectionData","results","forEach","document","data","id","list","filter","elem","addedBookDate","Date","timestamp","date","toLocaleDateString","time","toLocaleTimeString","push","map","book","i"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,cAAT,QAA+B,yBAA/B;AACA,SAASC,WAAT,QAA2B,aAA3B;AAEA,OAAO,uBAAP;AAEA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,QAAP,MAAqB,oCAArB;;AAGA,MAAMC,cAAc,GAAG,MAAM;AAEzB,QAAMC,IAAI,GAAGJ,WAAW,CAAEK,KAAD,IAAUA,KAAK,CAACD,IAAjB,CAAxB;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBH,IAAtB;;AAHyB,oBAKOP,QAAQ,CAAC,EAAD,CALf;AAAA;AAAA,QAKlBW,QALkB;AAAA,QAKRC,WALQ;;AAMzBH,EAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BC,QAA1B;AAEAV,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIM,IAAI,KAAK,IAAb,EAAmB;AAEnBL,IAAAA,cAAc,CAAC;AAACW,MAAAA,UAAU,EAAE,OAAb;AACfC,MAAAA,QAAQ,EAAGC,cAAD,IAAoB;AAC9B,cAAMC,OAAO,GAAG,EAAhB,CAD8B,CAE9B;AACA;AACA;;AACAD,QAAAA,cAAc,CAACE,OAAf,CAAwBC,QAAD,IAAc;AACjC,gBAAMC,IAAI;AAAIC,YAAAA,EAAE,EAAEF,QAAQ,CAACE;AAAjB,aAAwBF,QAAQ,CAACC,IAAT,EAAxB,CAAV;;AACAV,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBS,IAAtB;AACA,gBAAME,IAAI,GAAGF,IAAI,CAACG,MAAL,CAAY,UAASC,IAAT,EAAc;AACvC,mBAAOA,IAAI,CAAChB,IAAL,KAAcA,IAAI,CAACa,EAA1B;AACE,WAFW,CAAb;AAGA,gBAAMI,aAAa,GAAG,IAAIC,IAAJ,CAASJ,IAAI,CAACK,SAAd,CAAtB;AACAL,UAAAA,IAAI,CAACM,IAAL,GAAYH,aAAa,CAACI,kBAAd,EAAZ;AACAP,UAAAA,IAAI,CAACQ,IAAL,GAAYL,aAAa,CAACM,kBAAd,EAAZ;AACAd,UAAAA,OAAO,CAACe,IAAR,CAAaV,IAAb;AACH,SAVD;AAWAT,QAAAA,WAAW,CAACI,OAAD,CAAX;AACC;AAlBc,KAAD,CAAd;AAoBL,GAvBU,EAuBR,CAACT,IAAD,CAvBQ,CAAT;AAyBA,SACI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACCI,QAAQ,CAACqB,GAAT,CAAa,CAACC,IAAD,EAAOC,CAAP,KACV,oBAAC,QAAD;AAAU,IAAA,GAAG,EAAED,IAAI,CAACb,EAApB;AAAwB,IAAA,IAAI,EAAEa,IAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADH,CADD,CADJ,CADJ;AASH,CA1CD;;AA4CA,eAAe3B,cAAf,C,CAMA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getAllRealTime } from '../../services/database';\nimport { useSelector} from 'react-redux';\n\nimport './MyBooksFriends.scss'\n\nimport Layout from '../../Layout';\nimport CardBook from '../../components/CardBook/CardBook';\n\n\nconst MyFriendsBooks = () => {\n\n    const user = useSelector((state)=> state.user);\n    console.log('user: ', user);\n\n    const [bookList, setBookList] = useState([])\n    console.log('bookList: ', bookList);\n        \n    useEffect(() => {\n        if (user === null) return;\n\n        getAllRealTime({collection: 'books', \n        callback: (collectionData) => {\n        const results = [];\n        // const list = results.filter(function(elem){\n        //     return elem.user !== user.id;\n        // })\n        collectionData.forEach((document) => {\n            const data = {id: document.id, ...document.data()};\n            console.log('data: ', data);\n            const list = data.filter(function(elem){\n            return elem.user !== user.id;\n             })\n            const addedBookDate = new Date(list.timestamp);\n            list.date = addedBookDate.toLocaleDateString();\n            list.time = addedBookDate.toLocaleTimeString();\n            results.push(list);\n        });\n        setBookList(results);\n        }\n    });\n  }, [user])\n\n    return ( \n        <Layout>\n            <div className=\"cardBook-container\">\n            {bookList.map((book, i)=>(\n                <CardBook key={book.id} book={book} />\n            ))}\n            </div>\n        </Layout>\n     );\n}\n \nexport default MyFriendsBooks;\n\n\n\n\n\n//   useEffect(() => {\n//     if (user === null) return;\n\n//     getAllRealTime({collection: 'books', }).then(result=>{\n//         const list = result.filter(function(elem){\n//             return elem.user !== user.id;\n//         })\n//         setBookList(list)\n//     })\n//   }, [user])"]},"metadata":{},"sourceType":"module"}