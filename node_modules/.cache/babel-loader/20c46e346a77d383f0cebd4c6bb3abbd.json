{"ast":null,"code":"import _defineProperty from \"/Users/rafelolmos/Documents/HookTheBook/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/rafelolmos/Documents/HookTheBook/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/rafelolmos/Documents/HookTheBook/src/pages/MyAlerts/MyAlerts.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport { getAllRealTime } from '../../services/database';\nimport { useSelector } from 'react-redux';\nimport '../MyBooks/MyBooks.scss';\nimport CardBook from '../../components/CardBook/CardBook';\nimport Layout from '../../Layout';\n\nconst MyAlerts = () => {\n  const user = useSelector(state => state.user);\n  console.log('user: ', user);\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        bookList = _useState2[0],\n        setBookList = _useState2[1];\n\n  console.log('setBookList: ', setBookList);\n  useEffect(() => {\n    if (user === null) return;\n    getAllRealTime({\n      collection: 'books',\n      callback: collectionData => {\n        const results = []; // const list = results.filter(function(elem){\n        //     return elem.user !== user.id;\n        // })\n\n        collectionData.forEach(document => {\n          console.log('document.user: ', document.user);\n\n          const data = _objectSpread({\n            id: document.id\n          }, document.data());\n\n          const addedBookDate = new Date(data.timestamp);\n          data.date = addedBookDate.toLocaleDateString();\n          data.time = addedBookDate.toLocaleTimeString();\n          results.push(data);\n        });\n        const list = results.filter(function (elem) {\n          return elem.bookState !== 'available';\n        });\n        setBookList(list);\n      }\n    });\n  }, [user]);\n  return React.createElement(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, \"My Alerts\"), React.createElement(\"div\", {\n    className: \"cardBook-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"window\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, bookList.map((book, i) => React.createElement(CardBook, {\n    book: book,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  })))));\n};\n\nexport default MyAlerts;","map":{"version":3,"sources":["/Users/rafelolmos/Documents/HookTheBook/src/pages/MyAlerts/MyAlerts.js"],"names":["React","useState","useEffect","getAllRealTime","useSelector","CardBook","Layout","MyAlerts","user","state","console","log","bookList","setBookList","collection","callback","collectionData","results","forEach","document","data","id","addedBookDate","Date","timestamp","date","toLocaleDateString","time","toLocaleTimeString","push","list","filter","elem","bookState","map","book","i"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,cAAT,QAA+B,yBAA/B;AACA,SAASC,WAAT,QAA2B,aAA3B;AAEA,OAAO,yBAAP;AAEA,OAAOC,QAAP,MAAqB,oCAArB;AACA,OAAOC,MAAP,MAAmB,cAAnB;;AAEA,MAAMC,QAAQ,GAAG,MAAM;AAEnB,QAAMC,IAAI,GAAGJ,WAAW,CAAEK,KAAD,IAAUA,KAAK,CAACD,IAAjB,CAAxB;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBH,IAAtB;;AAHmB,oBAKaP,QAAQ,CAAC,EAAD,CALrB;AAAA;AAAA,QAKZW,QALY;AAAA,QAKFC,WALE;;AAMnBH,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BE,WAA7B;AAEAX,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIM,IAAI,KAAK,IAAb,EAAmB;AAEnBL,IAAAA,cAAc,CAAC;AAACW,MAAAA,UAAU,EAAE,OAAb;AACfC,MAAAA,QAAQ,EAAGC,cAAD,IAAoB;AAC9B,cAAMC,OAAO,GAAG,EAAhB,CAD8B,CAG9B;AACA;AACA;;AACAD,QAAAA,cAAc,CAACE,OAAf,CAAwBC,QAAD,IAAc;AACjCT,UAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BQ,QAAQ,CAACX,IAAxC;;AACA,gBAAMY,IAAI;AAAIC,YAAAA,EAAE,EAAEF,QAAQ,CAACE;AAAjB,aAAwBF,QAAQ,CAACC,IAAT,EAAxB,CAAV;;AACA,gBAAME,aAAa,GAAG,IAAIC,IAAJ,CAASH,IAAI,CAACI,SAAd,CAAtB;AACAJ,UAAAA,IAAI,CAACK,IAAL,GAAYH,aAAa,CAACI,kBAAd,EAAZ;AACAN,UAAAA,IAAI,CAACO,IAAL,GAAYL,aAAa,CAACM,kBAAd,EAAZ;AACAX,UAAAA,OAAO,CAACY,IAAR,CAAaT,IAAb;AACH,SAPD;AAQA,cAAMU,IAAI,GAAGb,OAAO,CAACc,MAAR,CAAe,UAASC,IAAT,EAAc;AACtC,iBAAOA,IAAI,CAACC,SAAL,KAAmB,WAA1B;AACH,SAFY,CAAb;AAGApB,QAAAA,WAAW,CAACiB,IAAD,CAAX;AACC;AAnBc,KAAD,CAAd;AAqBL,GAxBU,EAwBR,CAACtB,IAAD,CAxBQ,CAAT;AA0BA,SACI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ,EAEI;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACCI,QAAQ,CAACsB,GAAT,CAAa,CAACC,IAAD,EAAOC,CAAP,KACV,oBAAC,QAAD;AAAU,IAAA,IAAI,EAAED,IAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADH,CADD,CADJ,CAFJ,CADJ;AAYH,CA9CD;;AAgDA,eAAe5B,QAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getAllRealTime } from '../../services/database';\nimport { useSelector} from 'react-redux';\n\nimport '../MyBooks/MyBooks.scss'\n\nimport CardBook from '../../components/CardBook/CardBook';\nimport Layout from '../../Layout';\n\nconst MyAlerts = () => {\n\n    const user = useSelector((state)=> state.user);\n    console.log('user: ', user);\n\n    const [bookList, setBookList] = useState([])\n    console.log('setBookList: ', setBookList);\n\n    useEffect(() => {\n        if (user === null) return;\n\n        getAllRealTime({collection: 'books', \n        callback: (collectionData) => {\n        const results = []\n        \n        // const list = results.filter(function(elem){\n        //     return elem.user !== user.id;\n        // })\n        collectionData.forEach((document) => {\n            console.log('document.user: ', document.user);\n            const data = {id: document.id, ...document.data()};\n            const addedBookDate = new Date(data.timestamp);\n            data.date = addedBookDate.toLocaleDateString();\n            data.time = addedBookDate.toLocaleTimeString();\n            results.push(data);\n        });\n        const list = results.filter(function(elem){\n            return elem.bookState !== 'available';\n        })\n        setBookList(list);\n        }\n    });\n  }, [user])\n\n    return (\n        <Layout>\n            <h1>My Alerts</h1>\n            <div className=\"cardBook-container\">\n                <div className=\"window\">\n                {bookList.map((book, i)=>(\n                    <CardBook book={book} />   \n                ))}\n                </div>\n            </div>\n        </Layout>\n     );\n}\n \nexport default MyAlerts;"]},"metadata":{},"sourceType":"module"}