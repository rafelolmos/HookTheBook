{"ast":null,"code":"import _defineProperty from \"/Users/rafelolmos/Documents/HookTheBook/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/rafelolmos/Documents/HookTheBook/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/rafelolmos/Documents/HookTheBook/src/pages/MyFriendsBooks/MyFriendsBooks.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport { getAllRealTime } from '../../services/database';\nimport { useSelector } from 'react-redux';\nimport './MyBooksFriends.scss';\nimport Layout from '../../Layout';\nimport CardBook from '../../components/CardBook/CardBook';\nimport SearchBook from '../../components/SearchBook/SearchBook';\n\nconst MyFriendsBooks = () => {\n  const user = useSelector(state => state.user);\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        bookList = _useState2[0],\n        setBookList = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        filteredBookList = _useState4[0],\n        setFilteredList = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        isFiltered = _useState6[0],\n        setIsFiltered = _useState6[1];\n\n  useEffect(() => {\n    if (user === null) return;\n    getAllRealTime({\n      collection: 'books',\n      callback: collectionData => {\n        const results = [];\n        collectionData.forEach(document => {\n          const data = _objectSpread({\n            id: document.id\n          }, document.data());\n\n          const addedBookDate = new Date(data.timestamp);\n          data.date = addedBookDate.toLocaleDateString();\n          data.time = addedBookDate.toLocaleTimeString();\n          results.push(data);\n        });\n        const list = results.filter(function (elem) {\n          return elem.user !== user.id;\n        });\n        setBookList(list);\n      }\n    });\n  }, [user]);\n\n  const setFilteredBookList = (list = [], mySearch = '') => {\n    if (!mySearch) {\n      setIsFiltered(false);\n      return setFilteredList([]);\n    }\n\n    console.log('list: ', list);\n    console.log('mySearch: ', mySearch);\n    const search = mySearch.toLowerCase();\n    const filteredList = list.filter(item => {\n      const authors = item.authors.toLowerCase();\n      const title = item.title.toLowerCase();\n\n      if (item) {\n        return authors.includes(search) || title.includes(search);\n      }\n\n      return false;\n    });\n    setIsFiltered(true);\n    setFilteredList(filteredList);\n    console.log('filteredList: ', filteredList);\n  };\n\n  console.log('isFiltered: ', isFiltered);\n  console.log('filteredBookList: ', filteredBookList);\n  console.log('bookList: ', bookList);\n  const myList = isFiltered ? filteredBookList : bookList;\n  return React.createElement(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"mainBar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"My Friends Books\")), React.createElement(\"div\", {\n    className: \"navigation-menu\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(SearchBook, {\n    bookList: bookList,\n    setFilteredBookList: setFilteredBookList,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"cardBook-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, myList.map((book, i) => React.createElement(CardBook, {\n    key: book.id,\n    book: book,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }))));\n};\n\nexport default MyFriendsBooks;","map":{"version":3,"sources":["/Users/rafelolmos/Documents/HookTheBook/src/pages/MyFriendsBooks/MyFriendsBooks.js"],"names":["React","useState","useEffect","getAllRealTime","useSelector","Layout","CardBook","SearchBook","MyFriendsBooks","user","state","bookList","setBookList","filteredBookList","setFilteredList","isFiltered","setIsFiltered","collection","callback","collectionData","results","forEach","document","data","id","addedBookDate","Date","timestamp","date","toLocaleDateString","time","toLocaleTimeString","push","list","filter","elem","setFilteredBookList","mySearch","console","log","search","toLowerCase","filteredList","item","authors","title","includes","myList","map","book","i"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,cAAT,QAA+B,yBAA/B;AACA,SAASC,WAAT,QAA2B,aAA3B;AAEA,OAAO,uBAAP;AAEA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,QAAP,MAAqB,oCAArB;AACA,OAAOC,UAAP,MAAuB,wCAAvB;;AAGA,MAAMC,cAAc,GAAG,MAAM;AAEzB,QAAMC,IAAI,GAAGL,WAAW,CAAEM,KAAD,IAAUA,KAAK,CAACD,IAAjB,CAAxB;;AAFyB,oBAIOR,QAAQ,CAAC,EAAD,CAJf;AAAA;AAAA,QAIlBU,QAJkB;AAAA,QAIRC,WAJQ;;AAAA,qBAKmBX,QAAQ,CAAC,EAAD,CAL3B;AAAA;AAAA,QAKlBY,gBALkB;AAAA,QAKAC,eALA;;AAAA,qBAMWb,QAAQ,CAAC,KAAD,CANnB;AAAA;AAAA,QAMlBc,UANkB;AAAA,QAMNC,aANM;;AAQzBd,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIO,IAAI,KAAK,IAAb,EAAmB;AAEnBN,IAAAA,cAAc,CAAC;AAACc,MAAAA,UAAU,EAAE,OAAb;AACfC,MAAAA,QAAQ,EAAGC,cAAD,IAAoB;AAC9B,cAAMC,OAAO,GAAG,EAAhB;AAEAD,QAAAA,cAAc,CAACE,OAAf,CAAwBC,QAAD,IAAc;AACjC,gBAAMC,IAAI;AAAIC,YAAAA,EAAE,EAAEF,QAAQ,CAACE;AAAjB,aAAwBF,QAAQ,CAACC,IAAT,EAAxB,CAAV;;AACA,gBAAME,aAAa,GAAG,IAAIC,IAAJ,CAASH,IAAI,CAACI,SAAd,CAAtB;AACAJ,UAAAA,IAAI,CAACK,IAAL,GAAYH,aAAa,CAACI,kBAAd,EAAZ;AACAN,UAAAA,IAAI,CAACO,IAAL,GAAYL,aAAa,CAACM,kBAAd,EAAZ;AACAX,UAAAA,OAAO,CAACY,IAAR,CAAaT,IAAb;AACH,SAND;AAOA,cAAMU,IAAI,GAAGb,OAAO,CAACc,MAAR,CAAe,UAASC,IAAT,EAAc;AACtC,iBAAOA,IAAI,CAAC1B,IAAL,KAAcA,IAAI,CAACe,EAA1B;AACH,SAFY,CAAb;AAGIZ,QAAAA,WAAW,CAACqB,IAAD,CAAX;AACH;AAfc,KAAD,CAAd;AAiBL,GApBU,EAoBR,CAACxB,IAAD,CApBQ,CAAT;;AAsBF,QAAM2B,mBAAmB,GAAG,CAACH,IAAI,GAAC,EAAN,EAAUI,QAAQ,GAAC,EAAnB,KAAwB;AAChD,QAAI,CAACA,QAAL,EAAe;AACbrB,MAAAA,aAAa,CAAC,KAAD,CAAb;AACE,aAAOF,eAAe,CAAC,EAAD,CAAtB;AACH;;AACDwB,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBN,IAAtB;AACAK,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BF,QAA1B;AAEA,UAAMG,MAAM,GAAGH,QAAQ,CAACI,WAAT,EAAf;AAEA,UAAMC,YAAY,GAAGT,IAAI,CAACC,MAAL,CAAYS,IAAI,IAAI;AACvC,YAAMC,OAAO,GAAGD,IAAI,CAACC,OAAL,CAAaH,WAAb,EAAhB;AACA,YAAMI,KAAK,GAAGF,IAAI,CAACE,KAAL,CAAWJ,WAAX,EAAd;;AAIA,UAAIE,IAAJ,EAAU;AACJ,eAAOC,OAAO,CAACE,QAAR,CAAiBN,MAAjB,KAA4BK,KAAK,CAACC,QAAN,CAAeN,MAAf,CAAnC;AACD;;AACD,aAAO,KAAP;AACH,KAVkB,CAArB;AAWExB,IAAAA,aAAa,CAAC,IAAD,CAAb;AACAF,IAAAA,eAAe,CAAC4B,YAAD,CAAf;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BG,YAA9B;AACL,GAxBD;;AAyBAJ,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BxB,UAA5B;AACAuB,EAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkC1B,gBAAlC;AACAyB,EAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0B5B,QAA1B;AAEA,QAAMoC,MAAM,GAAGhC,UAAU,GACvBF,gBADuB,GAEvBF,QAFF;AAIE,SACI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAvB,CADJ,EAEI;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA,oBAAC,UAAD;AAAY,IAAA,QAAQ,EAAEA,QAAtB;AAAgC,IAAA,mBAAmB,EAAEyB,mBAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,CAFJ,CADJ,EAOI;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACCW,MAAM,CAACC,GAAP,CAAW,CAACC,IAAD,EAAOC,CAAP,KACR,oBAAC,QAAD;AAAU,IAAA,GAAG,EAAED,IAAI,CAACzB,EAApB;AAAwB,IAAA,IAAI,EAAEyB,IAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADH,CADD,CAPJ,CADJ;AAeH,CA9ED;;AAgFA,eAAezC,cAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getAllRealTime } from '../../services/database';\nimport { useSelector} from 'react-redux';\n\nimport './MyBooksFriends.scss'\n\nimport Layout from '../../Layout';\nimport CardBook from '../../components/CardBook/CardBook';\nimport SearchBook from '../../components/SearchBook/SearchBook';\n\n\nconst MyFriendsBooks = () => {\n\n    const user = useSelector((state)=> state.user);\n\n    const [bookList, setBookList] = useState([])\n    const [filteredBookList, setFilteredList] = useState([])\n    const [isFiltered, setIsFiltered] = useState(false)\n        \n    useEffect(() => {\n        if (user === null) return;\n\n        getAllRealTime({collection: 'books', \n        callback: (collectionData) => {\n        const results = []\n\n        collectionData.forEach((document) => {\n            const data = {id: document.id, ...document.data()};\n            const addedBookDate = new Date(data.timestamp);\n            data.date = addedBookDate.toLocaleDateString();\n            data.time = addedBookDate.toLocaleTimeString();\n            results.push(data);\n        });\n        const list = results.filter(function(elem){\n            return elem.user !== user.id;\n        })\n            setBookList(list);\n        }\n    });\n  }, [user])\n\n  const setFilteredBookList = (list=[], mySearch='')=>{\n      if (!mySearch) {\n        setIsFiltered(false);\n          return setFilteredList([]);\n      }\n      console.log('list: ', list);\n      console.log('mySearch: ', mySearch);\n\n      const search = mySearch.toLowerCase()\n\n      const filteredList = list.filter(item => {\n        const authors = item.authors.toLowerCase();\n        const title = item.title.toLowerCase();\n\n\n        \n        if (item) {\n              return authors.includes(search) || title.includes(search)\n            }\n            return false\n        })\n        setIsFiltered(true)\n        setFilteredList(filteredList);\n        console.log('filteredList: ', filteredList);\n  }\n  console.log('isFiltered: ', isFiltered);\n  console.log('filteredBookList: ', filteredBookList);\n  console.log('bookList: ', bookList);\n\n  const myList = isFiltered\n  ? filteredBookList \n  : bookList;\n  \n    return ( \n        <Layout>\n            <div className=\"mainBar\">\n                <div className=\"title\"><h1>My Friends Books</h1></div>\n                <div className=\"navigation-menu\">\n                <SearchBook bookList={bookList} setFilteredBookList={setFilteredBookList}/>\n            </div>\n            </div>\n            <div className=\"cardBook-container\">\n            {myList.map((book, i)=>(\n                <CardBook key={book.id} book={book} />\n            ))}\n            </div>\n        </Layout>\n     );\n}\n \nexport default MyFriendsBooks;"]},"metadata":{},"sourceType":"module"}