{"ast":null,"code":"import _defineProperty from \"/Users/rafelolmos/Documents/HookTheBook/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/rafelolmos/Documents/HookTheBook/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/rafelolmos/Documents/HookTheBook/src/pages/MyFriendsBooks/MyFriendsBooks.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport { getAllRealTime } from '../../services/database';\nimport { useSelector } from 'react-redux';\nimport './MyBooksFriends.scss';\nimport Layout from '../../Layout';\nimport CardBook from '../../components/CardBook/CardBook';\nimport SearchBook from '../../components/SearchBook/SearchBook';\n\nconst MyFriendsBooks = () => {\n  const user = useSelector(state => state.user);\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        bookList = _useState2[0],\n        setBookList = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        filteredBookList = _useState4[0],\n        setFilteredList = _useState4[1];\n\n  useEffect(() => {\n    if (user === null) return;\n    getAllRealTime({\n      collection: 'books',\n      callback: collectionData => {\n        const results = [];\n        collectionData.forEach(document => {\n          const data = _objectSpread({\n            id: document.id\n          }, document.data());\n\n          const addedBookDate = new Date(data.timestamp);\n          data.date = addedBookDate.toLocaleDateString();\n          data.time = addedBookDate.toLocaleTimeString();\n          results.push(data);\n        });\n        const list = results.filter(function (elem) {\n          return elem.user !== user.id;\n        });\n        setBookList(list);\n      }\n    });\n  }, [user]);\n\n  const setFilteredBookList = (list = [], mySearch = '') => {\n    if (!mySearch) return setFilteredList([]);\n    const filteredList = list.filter(item => {\n      if (item) {\n        return item.authors.includes(mySearch) || item.title.includes(mySearch);\n      }\n\n      return false;\n    });\n    setFilteredList(filteredList);\n  };\n\n  const myList = filteredBookList.length ? filteredBookList : bookList;\n  return React.createElement(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"mainBar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"My Friends Books\")), React.createElement(\"div\", {\n    className: \"navigation-menu\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(SearchBook, {\n    bookList: bookList,\n    setFilteredBookList: setFilteredBookList,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"cardBook-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, myList.map((book, i) => React.createElement(CardBook, {\n    key: book.id,\n    book: book,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }))));\n};\n\nexport default MyFriendsBooks;","map":{"version":3,"sources":["/Users/rafelolmos/Documents/HookTheBook/src/pages/MyFriendsBooks/MyFriendsBooks.js"],"names":["React","useState","useEffect","getAllRealTime","useSelector","Layout","CardBook","SearchBook","MyFriendsBooks","user","state","bookList","setBookList","filteredBookList","setFilteredList","collection","callback","collectionData","results","forEach","document","data","id","addedBookDate","Date","timestamp","date","toLocaleDateString","time","toLocaleTimeString","push","list","filter","elem","setFilteredBookList","mySearch","filteredList","item","authors","includes","title","myList","length","map","book","i"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,cAAT,QAA+B,yBAA/B;AACA,SAASC,WAAT,QAA2B,aAA3B;AAEA,OAAO,uBAAP;AAEA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,QAAP,MAAqB,oCAArB;AACA,OAAOC,UAAP,MAAuB,wCAAvB;;AAGA,MAAMC,cAAc,GAAG,MAAM;AAEzB,QAAMC,IAAI,GAAGL,WAAW,CAAEM,KAAD,IAAUA,KAAK,CAACD,IAAjB,CAAxB;;AAFyB,oBAIOR,QAAQ,CAAC,EAAD,CAJf;AAAA;AAAA,QAIlBU,QAJkB;AAAA,QAIRC,WAJQ;;AAAA,qBAKmBX,QAAQ,CAAC,EAAD,CAL3B;AAAA;AAAA,QAKlBY,gBALkB;AAAA,QAKAC,eALA;;AAOzBZ,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIO,IAAI,KAAK,IAAb,EAAmB;AAEnBN,IAAAA,cAAc,CAAC;AAACY,MAAAA,UAAU,EAAE,OAAb;AACfC,MAAAA,QAAQ,EAAGC,cAAD,IAAoB;AAC9B,cAAMC,OAAO,GAAG,EAAhB;AAEAD,QAAAA,cAAc,CAACE,OAAf,CAAwBC,QAAD,IAAc;AACjC,gBAAMC,IAAI;AAAIC,YAAAA,EAAE,EAAEF,QAAQ,CAACE;AAAjB,aAAwBF,QAAQ,CAACC,IAAT,EAAxB,CAAV;;AACA,gBAAME,aAAa,GAAG,IAAIC,IAAJ,CAASH,IAAI,CAACI,SAAd,CAAtB;AACAJ,UAAAA,IAAI,CAACK,IAAL,GAAYH,aAAa,CAACI,kBAAd,EAAZ;AACAN,UAAAA,IAAI,CAACO,IAAL,GAAYL,aAAa,CAACM,kBAAd,EAAZ;AACAX,UAAAA,OAAO,CAACY,IAAR,CAAaT,IAAb;AACH,SAND;AAOA,cAAMU,IAAI,GAAGb,OAAO,CAACc,MAAR,CAAe,UAASC,IAAT,EAAc;AACtC,iBAAOA,IAAI,CAACxB,IAAL,KAAcA,IAAI,CAACa,EAA1B;AACH,SAFY,CAAb;AAGIV,QAAAA,WAAW,CAACmB,IAAD,CAAX;AACH;AAfc,KAAD,CAAd;AAiBL,GApBU,EAoBR,CAACtB,IAAD,CApBQ,CAAT;;AAsBF,QAAMyB,mBAAmB,GAAG,CAACH,IAAI,GAAC,EAAN,EAAUI,QAAQ,GAAC,EAAnB,KAAwB;AAChD,QAAI,CAACA,QAAL,EAAe,OAAOrB,eAAe,CAAC,EAAD,CAAtB;AAEf,UAAMsB,YAAY,GAAGL,IAAI,CAACC,MAAL,CAAYK,IAAI,IAAI;AACvC,UAAIA,IAAJ,EAAU;AACR,eAAOA,IAAI,CAACC,OAAL,CAAaC,QAAb,CAAsBJ,QAAtB,KAAmCE,IAAI,CAACG,KAAL,CAAWD,QAAX,CAAoBJ,QAApB,CAA1C;AACD;;AACD,aAAO,KAAP;AACD,KALoB,CAArB;AAMArB,IAAAA,eAAe,CAACsB,YAAD,CAAf;AACH,GAVD;;AAYA,QAAMK,MAAM,GAAG5B,gBAAgB,CAAC6B,MAAjB,GAA0B7B,gBAA1B,GAA6CF,QAA5D;AAEE,SACI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAvB,CADJ,EAEI;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA,oBAAC,UAAD;AAAY,IAAA,QAAQ,EAAEA,QAAtB;AAAgC,IAAA,mBAAmB,EAAEuB,mBAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,CAFJ,CADJ,EAOI;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACCO,MAAM,CAACE,GAAP,CAAW,CAACC,IAAD,EAAOC,CAAP,KACR,oBAAC,QAAD;AAAU,IAAA,GAAG,EAAED,IAAI,CAACtB,EAApB;AAAwB,IAAA,IAAI,EAAEsB,IAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADH,CADD,CAPJ,CADJ;AAeH,CA1DD;;AA4DA,eAAepC,cAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getAllRealTime } from '../../services/database';\nimport { useSelector} from 'react-redux';\n\nimport './MyBooksFriends.scss'\n\nimport Layout from '../../Layout';\nimport CardBook from '../../components/CardBook/CardBook';\nimport SearchBook from '../../components/SearchBook/SearchBook';\n\n\nconst MyFriendsBooks = () => {\n\n    const user = useSelector((state)=> state.user);\n\n    const [bookList, setBookList] = useState([])\n    const [filteredBookList, setFilteredList] = useState([])\n        \n    useEffect(() => {\n        if (user === null) return;\n\n        getAllRealTime({collection: 'books', \n        callback: (collectionData) => {\n        const results = []\n\n        collectionData.forEach((document) => {\n            const data = {id: document.id, ...document.data()};\n            const addedBookDate = new Date(data.timestamp);\n            data.date = addedBookDate.toLocaleDateString();\n            data.time = addedBookDate.toLocaleTimeString();\n            results.push(data);\n        });\n        const list = results.filter(function(elem){\n            return elem.user !== user.id;\n        })\n            setBookList(list);\n        }\n    });\n  }, [user])\n\n  const setFilteredBookList = (list=[], mySearch='')=>{\n      if (!mySearch) return setFilteredList([]);\n\n      const filteredList = list.filter(item => {\n        if (item) {\n          return item.authors.includes(mySearch) || item.title.includes(mySearch)\n        }\n        return false\n      })\n      setFilteredList(filteredList);\n  }\n\n  const myList = filteredBookList.length ? filteredBookList : bookList;\n\n    return ( \n        <Layout>\n            <div className=\"mainBar\">\n                <div className=\"title\"><h1>My Friends Books</h1></div>\n                <div className=\"navigation-menu\">\n                <SearchBook bookList={bookList} setFilteredBookList={setFilteredBookList}/>\n            </div>\n            </div>\n            <div className=\"cardBook-container\">\n            {myList.map((book, i)=>(\n                <CardBook key={book.id} book={book} />\n            ))}\n            </div>\n        </Layout>\n     );\n}\n \nexport default MyFriendsBooks;"]},"metadata":{},"sourceType":"module"}